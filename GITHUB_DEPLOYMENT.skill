---
name: github-pages-deployment-localization
description: å®Œæ•´çš„ GitHub Pages éƒ¨ç½²ä¸ä¸­æ–‡åŒ–æµç¨‹ã€‚åŒ…å«éƒ¨ç½²é…ç½®ã€å·¥ä½œæµè®¾ç½®ã€ä¸­æ–‡ UI ç¿»è¯‘å’Œæ•…éšœæ’é™¤çš„å®Œæ•´æŒ‡å—ã€‚
tags: [github-pages, deployment, ci-cd, localization, chinese-i18n, vite]
---

# GitHub Pages éƒ¨ç½²ä¸ä¸­æ–‡åŒ–å®Œæ•´æŠ€èƒ½æŒ‡å—

## é—®é¢˜åœºæ™¯

- éƒ¨ç½²åº”ç”¨åˆ° GitHub Pagesï¼Œä½†æ˜¾ç¤º 404 é”™è¯¯
- åº”ç”¨ UI ä¸­æœ‰å¤§é‡æœªç¿»è¯‘çš„è‹±æ–‡èœå•é¡¹å’Œ tooltip
- éœ€è¦å®Œæ•´çš„ CI/CD å·¥ä½œæµè‡ªåŠ¨éƒ¨ç½²
- éœ€è¦å®Œå–„å›½é™…åŒ–ï¼ˆi18nï¼‰ç³»ç»Ÿçš„ä¸­æ–‡ç¿»è¯‘è¦†ç›–

---

## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1ï¼šé…ç½® GitHub Pages éƒ¨ç½²å·¥ä½œæµ

**æ–‡ä»¶**: `.github/workflows/deploy.yml`

```yaml
name: Build & Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'
    - run: npm ci
    - run: npm run build
      env:
        GITHUB_PAGES: 'true'
    - uses: actions/upload-pages-artifact@v3
      with:
        path: 'dist'

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
    - uses: actions/deploy-pages@v4
      id: deployment
```

**å…³é”®ç‚¹**:
- âœ… è®¾ç½®æƒé™ `pages: write` - å…è®¸ GitHub Actions éƒ¨ç½²åˆ° Pages
- âœ… ç¯å¢ƒå˜é‡ `GITHUB_PAGES: 'true'` - å‘Šè¯‰æ„å»ºè„šæœ¬é…ç½®æ­£ç¡®çš„åŸºç¡€è·¯å¾„
- âœ… ä½¿ç”¨ `actions/upload-pages-artifact@v3` - ä¸Šä¼ æ„å»ºäº§ç‰©
- âœ… ä½¿ç”¨ `actions/deploy-pages@v4` - æ‰§è¡Œå®é™…éƒ¨ç½²

### æ­¥éª¤ 2ï¼šé…ç½® Vite åŸºç¡€è·¯å¾„

**æ–‡ä»¶**: `vite.config.ts`

```typescript
export default defineConfig({
  // ... å…¶ä»–é…ç½®
  base: process.env.GITHUB_PAGES === 'true' ? '/worldmonitor/' : '/',
  // ...
});
```

**å…³é”®ç‚¹**:
- âœ… æ£€æŸ¥ `GITHUB_PAGES` ç¯å¢ƒå˜é‡
- âœ… GitHub Pages ä¸Šè®¾ç½®åŸºç¡€è·¯å¾„ä¸ºä»“åº“åç§° `/worldmonitor/`
- âœ… æœ¬åœ°å¼€å‘æ—¶ä¿æŒä¸º `/`

### æ­¥éª¤ 3ï¼šæ·»åŠ  .nojekyll æ–‡ä»¶

**æ–‡ä»¶**: `.nojekyll` (é¡¹ç›®æ ¹ç›®å½•)

```bash
touch .nojekyll
```

**ä½œç”¨**: å‘Šè¯‰ GitHub ä¸è¦å°†æ­¤ä»“åº“ä½œä¸º Jekyll é¡¹ç›®å¤„ç†ï¼Œç›´æ¥å‘å¸ƒé™æ€æ–‡ä»¶ã€‚

### æ­¥éª¤ 4ï¼šåœ¨ GitHub è®¾ç½®ä¸­é…ç½® Pages

1. è®¿é—®: `https://github.com/<username>/<repo>/settings/pages`
2. **Build and deployment** â†’ **Source** â†’ é€‰æ‹© **GitHub Actions**
3. ç‚¹å‡» **Save**

---

## ğŸŒ å®Œå–„ä¸­æ–‡åŒ–ï¼ˆi18nï¼‰

### é—®é¢˜è¯Šæ–­

æŸäº› UI å…ƒç´ ä»æ˜¾ç¤ºè‹±æ–‡çš„åŸå› ï¼š

1. **HTML title/tooltip å±æ€§** - ç›´æ¥åœ¨æ¨¡æ¿ä¸­ç¡¬ç¼–ç 
2. **Placeholder å’Œ aria-label** - æœªé€šè¿‡ç¿»è¯‘å‡½æ•°
3. **ç»„ä»¶å†…ç¡¬ç¼–ç çš„æ–‡æœ¬** - æ²¡æœ‰ä½¿ç”¨ `t()` å‡½æ•°

### è§£å†³æ–¹æ¡ˆ Aï¼šæ‰©å±•ç¿»è¯‘è¯å…¸

**æ–‡ä»¶**: `src/utils/i18n.ts`

æ·»åŠ æ–°çš„ç¿»è¯‘ keyï¼ˆè‹±æ–‡å’Œä¸­æ–‡éƒ½éœ€è¦ï¼‰ï¼š

```typescript
const translations: Record<string, TranslationDict> = {
  'en': {
    // ... å·²æœ‰çš„ç¿»è¯‘
    'Share story': 'Share story',
    'Unrest': 'Unrest',
    'Conflict': 'Conflict',
    'Security': 'Security',
    'Information': 'Information',
    'Export Data': 'Export Data',
    'Zoom In': 'Zoom In',
    'Zoom Out': 'Zoom Out',
    // ... æ›´å¤šé¡¹ç›®
  },
  'zh-TW': {
    // ... å·²æœ‰çš„ç¿»è¯‘
    'Share story': 'åˆ†äº«æ•…äº‹',
    'Unrest': 'ä¸å®‰å®š',
    'Conflict': 'è¡çª',
    'Security': 'å®‰å…¨',
    'Information': 'ä¿¡æ¯',
    'Export Data': 'åŒ¯å‡ºè³‡æ–™',
    'Zoom In': 'æ”¾å¤§',
    'Zoom Out': 'ç¸®å°',
    // ... æ›´å¤šé¡¹ç›®
  }
};
```

### è§£å†³æ–¹æ¡ˆ Bï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ t() å‡½æ•°

**æ­¥éª¤ 1**: å¯¼å…¥ç¿»è¯‘å‡½æ•°

```typescript
import { t } from '@/utils';
```

**æ­¥éª¤ 2**: æ›¿æ¢ç¡¬ç¼–ç çš„ title å±æ€§

```typescript
// âŒ é”™è¯¯ - ç¡¬ç¼–ç è‹±æ–‡
<button title="Share story">Share</button>

// âœ… æ­£ç¡® - ä½¿ç”¨ç¿»è¯‘å‡½æ•°
<button title="${t('Share story')}">Share</button>
```

**ç¤ºä¾‹** - CIIPanel.ts:

```typescript
import { t } from '@/utils';

// åœ¨ render æ–¹æ³•ä¸­
const html = `
  <button title="${t('Share story')}">
    <svg>...</svg>
  </button>
  <span title="${t('Unrest')}">U:${value}</span>
  <span title="${t('Conflict')}">C:${value}</span>
  <span title="${t('Security')}">S:${value}</span>
  <span title="${t('Information')}">I:${value}</span>
`;
```

### è§£å†³æ–¹æ¡ˆ Cï¼šå¤„ç† Placeholder å’Œ Aria-Label

```typescript
// Placeholder
<input placeholder="${t('Filter sources...')}" />

// Aria-label
<button aria-label="${t('Close')}">Ã—</button>
```

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: éƒ¨ç½²åä»æ˜¾ç¤º 404

**ç—‡çŠ¶**: `Error 404: File not found`

**åŸå› åˆ†æ**:
1. GitHub Pages æœªé…ç½®ä¸ºä½¿ç”¨ GitHub Actions
2. åŸºç¡€è·¯å¾„é…ç½®é”™è¯¯
3. æ„å»ºæ²¡æœ‰ç”Ÿæˆæ­£ç¡®çš„ `dist/index.html`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥æœ¬åœ°æ„å»º
GITHUB_PAGES=true npm run build

# 2. éªŒè¯ dist/index.html å­˜åœ¨
ls -lah dist/index.html

# 3. æ£€æŸ¥ Settings â†’ Pages ä¸­æ˜¯å¦é€‰æ‹© GitHub Actions
# 4. æŸ¥çœ‹ GitHub Actions å·¥ä½œæµæ˜¯å¦æˆåŠŸè¿è¡Œ
# Repo â†’ Actions â†’ ç‚¹å‡»æœ€æ–°è¿è¡Œ â†’ æ£€æŸ¥æ—¥å¿—
```

### é—®é¢˜ 2: ä¸­æ–‡ç¿»è¯‘æ˜¾ç¤ºè‹±æ–‡

**ç—‡çŠ¶**: é¼ æ ‡åœç•™åœ¨æŒ‰é’®ä¸Šæ˜¾ç¤ºè‹±æ–‡ tooltip

**åŸå› åˆ†æ**:
1. ç¿»è¯‘ key æœªæ·»åŠ åˆ° i18n.ts
2. ç»„ä»¶æœªå¯¼å…¥ `t` å‡½æ•°
3. ä½¿ç”¨äº†ç¡¬ç¼–ç  title è€Œé `${t(...)}`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. éªŒè¯ç¿»è¯‘å­˜åœ¨
grep "Share story" src/utils/i18n.ts

# 2. æ£€æŸ¥ç»„ä»¶æ˜¯å¦ä½¿ç”¨äº† t()
grep "title=\"\${t(" src/components/*.ts

# 3. è¿è¡Œç±»å‹æ£€æŸ¥ç¡®ä¿æ²¡æœ‰é”™è¯¯
npm run typecheck
```

### é—®é¢˜ 3: "æ— æ–°èå¯ç”¨" æç¤º

**ç—‡çŠ¶**: æŸäº›çœ‹æ¿æ˜¾ç¤º `ç„¡æ–°èå¯ç”¨`

**åŸå› åˆ†æ** âœ… è¿™æ˜¯æ­£ç¡®çš„ä¸­æ–‡ç¿»è¯‘ï¼
- RSS æºæš‚æ—¶ä¸å¯ç”¨ï¼ˆè¿›å…¥ 5 åˆ†é’Ÿå†·å´æœŸï¼‰
- æ•°æ®è¢«å®‰å…¨è¿‡æ»¤å™¨è¿‡æ»¤æ‰
- API ä»£ç†è¿”å› 404/500

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
# åº”è¯¥çœ‹åˆ° [RSS] <source> on cooldown... çš„è­¦å‘Š

# 2. ç­‰å¾… 5 åˆ†é’Ÿååˆ·æ–°

# 3. æ£€æŸ¥ç½‘ç»œé€‰é¡¹å¡
# ç¡®è®¤ API è¯·æ±‚æ˜¯å¦è¿”å› 200 è€Œé 404/500

# 4. å¦‚æœä½¿ç”¨è‡ªå®šä¹‰ APIï¼ŒéªŒè¯ä»£ç†é…ç½®
# /api/gdelt, /api/hackernews ç­‰æ˜¯å¦æ­£ç¡®æ˜ å°„
```

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰éªŒè¯ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] `.github/workflows/deploy.yml` å·²åˆ›å»ºä¸”é…ç½®æ­£ç¡®
- [ ] `vite.config.ts` ä¸­è®¾ç½®äº† `base` è·¯å¾„é€»è¾‘
- [ ] `.nojekyll` æ–‡ä»¶å­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•
- [ ] GitHub ä»“åº“ Settings â†’ Pages ä¸­é€‰æ‹© GitHub Actions
- [ ] `npm run typecheck` é€šè¿‡æ— é”™è¯¯
- [ ] `npm run build` æˆåŠŸç”Ÿæˆ `dist/` æ–‡ä»¶å¤¹
- [ ] `dist/index.html` å­˜åœ¨ä¸”åŒ…å«æ­£ç¡®çš„ base è·¯å¾„
- [ ] æ‰€æœ‰æ–°çš„ç¿»è¯‘ key éƒ½åœ¨ i18n.ts ä¸­åŒæ—¶å®šä¹‰äº†è‹±æ–‡å’Œä¸­æ–‡
- [ ] æ‰€æœ‰ title/placeholder/aria-label éƒ½ä½¿ç”¨ `${t(...)}` æ ¼å¼
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°æè¿°äº†æ‰€åšçš„æ›´æ”¹

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æµç¨‹

### ç¬¬ä¸€æ¬¡éƒ¨ç½²

```bash
# 1. åˆ›å»ºæˆ–ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶
# .github/workflows/deploy.yml

# 2. é…ç½® vite.config.ts
# base: process.env.GITHUB_PAGES === 'true' ? '/worldmonitor/' : '/'

# 3. æ·»åŠ  .nojekyll
touch .nojekyll

# 4. æœ¬åœ°éªŒè¯
npm run typecheck
npm run build

# 5. æäº¤å’Œæ¨é€
git add .
git commit -m "chore: setup GitHub Pages deployment"
git push origin main

# 6. åœ¨ GitHub Settings â†’ Pages é€‰æ‹© GitHub Actions
# https://github.com/<username>/<repo>/settings/pages
```

### æ›´æ–°ä¸­æ–‡åŒ–

```bash
# 1. æ·»åŠ æ–°çš„ç¿»è¯‘åˆ° i18n.ts
# åŒæ—¶æ·»åŠ è‹±æ–‡å’Œä¸­æ–‡ key-value

# 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ t() å‡½æ•°
# import { t } from '@/utils';
# <button title="${t('new-key')}">

# 3. éªŒè¯ç±»å‹
npm run typecheck

# 4. æ„å»ºå’Œéƒ¨ç½²
npm run build
git add .
git commit -m "feat: add Chinese translation for UI elements"
git push origin main
```

---

## ğŸ“Š æœ¬æ¬¡æˆæœç»Ÿè®¡ (2026-02-11)

- âœ… GitHub Pages éƒ¨ç½²å·¥ä½œæµå®Œæ•´é…ç½®
- âœ… 404 é”™è¯¯è¯Šæ–­å’Œä¿®å¤
- âœ… æ·»åŠ  60+ ä¸ªæ–°ç¿»è¯‘ key
- âœ… å®Œæ•´çš„ä¸­æ–‡ tooltip è¦†ç›–
- âœ… å†›äº‹å’ŒåŸºç¡€è®¾æ–½æœ¯è¯­ä¸­æ–‡åŒ–
- âœ… åœ°å›¾æ§åˆ¶å’Œåˆ†äº«åŠŸèƒ½å®Œå…¨ä¸­æ–‡åŒ–
- âœ… éƒ¨ç½²åœ°å€: https://pachelbel23.github.io/worldmonitor/

---

## å‚è€ƒèµ„æº

- [GitHub Pages å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/pages)
- [GitHub Actions å·¥ä½œæµè¯­æ³•](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [Vite éƒ¨ç½²æŒ‡å—](https://vitejs.dev/guide/static-deploy.html#github-pages)

